<html>
  <head>
    <title>BundeslÃ¤nder Deutschland</title>
    <meta charset="utf-8"></meta>
    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
  	<script src="https://unpkg.com/aframe-geojson-component/dist/aframe-geojson-component.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-asset-item id="bundeslaender_de" src="assets/bundeslaender_hoch.json" />
      </a-assets>
      <a-entity scale="50 1 50" position="-11.5 0 0">
        <a-entity id="countries-plate"
          position="0 0 1"
          class="gazeactivated"
          geometry="primitive: plane; width: 8; height: 4;"
          rotation="-90 0 0"
          material="shader: flat; color: #000; transparent: true;"
          geojson="src: #bundeslaender_de; lineWidth: 1;"
          visible="true">
        </a-entity>
      </a-entity>
      <a-sky color="#08F"></a-sky>
      <a-camera id="camera" rotation="-45 0 0" user-height="5" wasd-controls-enabled="true" look-controls-enabled="true"></a-camera>
    </a-scene>
    <script language="javascript">
		var sample = new Array(200)

		for (var i = 0; i < 200; i++) {
			sample[i] = Math.random() * 200
		}

		var heightScale = d3.scale.linear()
			.domain([0, d3.max(sample)])
			.range([0,0.9])

		var greenScale = d3.scale.linear()
			.domain([0, d3.max(sample)])
			.range([255,0])

		var redScale = d3.scale.linear()
			.domain([0, d3.max(sample)])
			.range([0,255])

		var scene = d3.select("a-scene");

		var cubes = scene.selectAll("a-cylinder.cyl")
      		.data(sample)
      		.enter()
      		.append("a-cylinder")
      		.classed("cyl",true)
      		.attr({
				position: function(d) {
					// returning x coordinate between 0 and 2
					var x = Math.random() * 7;
					var z = Math.random() * 7.5;

					var y = heightScale(d) / 2;

					return x-3.3 + " " + y + " " + (-z-2.48)
				},
				height: function(d) {
				    return heightScale(d)
				},
				radius: function(d) {
					return 0.05
				},
				color: function(d) {
					if(heightScale(d)<0.3)
						return "rgb(0,255,0)"
					if(heightScale(d)>0.6)
						return "rgb(255,0,0)"
					else
						return "rgb(255,255,0)"
				}
			})

    </script>
  </body>
</html>